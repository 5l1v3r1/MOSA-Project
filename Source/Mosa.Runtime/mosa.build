<?xml version="1.0"?>
<project name="Mosa" default="build" basedir=".">
	
	<!-- Comma-separated list of warnings that should be surpressed in all modules. Warning: no spaces allowed! -->
	<property name="suppresswarnings" value="0414,0219,0169,0162,0168"/>
	
	<!-- Toggle debug output by setting this to true (nant -D:debug=true) -->
	<property name="debug" value="none" overwrite="false"/>
	
	<!-- Speaks for itself, I should hope -->
	<property name="outputDirectory" value="../bin" overwrite="false"/>
	
	<!-- Main build target -->
	<target name="build">
	    <csc target="library" output="${outputDirectory}/Mosa.Runtime.dll" debug="${debug}" unsafe="true" nostdlib="false">
		<sources>
                    <include name="CompilerFramework/AssemblyMemberCompilationSchedulerStage.cs"/>
                    <include name="CompilerFramework/BaseInstruction.cs"/>
                    <include name="CompilerFramework/BasicBlockBuilderStage.cs"/>
                    <include name="CompilerFramework/CIL/AddInstruction.cs"/>
                    <include name="CompilerFramework/CIL/ArglistInstruction.cs"/>
                    <include name="CompilerFramework/CIL/ArithmeticInstruction.cs"/>
                    <include name="CompilerFramework/CIL/ArithmeticOverflowInstruction.cs"/>
                    <include name="CompilerFramework/CIL/BinaryBranchInstruction.cs"/>
                    <include name="CompilerFramework/CIL/BinaryComparisonInstruction.cs"/>
                    <include name="CompilerFramework/CIL/BinaryInstruction.cs"/>
                    <include name="CompilerFramework/CIL/BinaryLogicInstruction.cs"/>
                    <include name="CompilerFramework/CIL/BoxingInstruction.cs"/>
                    <include name="CompilerFramework/CIL/BoxInstruction.cs"/>
                    <include name="CompilerFramework/CIL/BranchInstruction.cs"/>
                    <include name="CompilerFramework/CIL/CalliInstruction.cs"/>
                    <include name="CompilerFramework/CIL/CallInstruction.cs"/>
                    <include name="CompilerFramework/CIL/CallvirtInstruction.cs"/>
                    <include name="CompilerFramework/CIL/CastclassInstruction.cs"/>
                    <include name="CompilerFramework/CIL/CILLeakGuardStage.cs"/>
                    <include name="CompilerFramework/CIL/DecodingStage.cs"/>
                    <include name="CompilerFramework/CIL/BreakInstruction.cs"/>
                    <include name="CompilerFramework/BaseAssemblyCompilerStage.cs"/>
                    <include name="CompilerFramework/CIL/ExceptionClauseHeader.cs"/>
                    <include name="CompilerFramework/TypeLayoutStage.cs"/>
                    <include name="CompilerFramework/ExceptionEngine.cs"/>
                    <include name="CompilerFramework/IR/ThrowInstruction.cs"/>
                    <include name="CompilerFramework/GenericsResolverStage.cs"/>
                    <include name="CompilerFramework/ICompilationSchedulerStage.cs"/>
                    <include name="CompilerFramework/Intrinsics/InternalAllocateString.cs"/>
                    <include name="CompilerFramework/IR/AddFInstruction.cs"/>
                    <include name="CompilerFramework/IR/AddSInstruction.cs"/>
                    <include name="CompilerFramework/IR/AddUInstruction.cs"/>
                    <include name="CompilerFramework/IR/BreakInstruction.cs"/>
                    <include name="CompilerFramework/IR/DivFInstruction.cs"/>
                    <include name="CompilerFramework/IR/DivSInstruction.cs"/>
                    <include name="CompilerFramework/IR/DivUInstruction.cs"/>
                    <include name="CompilerFramework/IR/MulFInstruction.cs"/>
                    <include name="CompilerFramework/IR/MulSInstruction.cs"/>
                    <include name="CompilerFramework/IR/MulUInstruction.cs"/>
                    <include name="CompilerFramework/IR/RemFInstruction.cs"/>
                    <include name="CompilerFramework/IR/RemSInstruction.cs"/>
                    <include name="CompilerFramework/IR/RemUInstruction.cs"/>
                    <include name="CompilerFramework/IR/SubFInstruction.cs"/>
                    <include name="CompilerFramework/IR/SubSInstruction.cs"/>
                    <include name="CompilerFramework/IR/SubUInstruction.cs"/>
                    <include name="CompilerFramework/IR/SwitchInstruction.cs"/>
                    <include name="CompilerFramework/MethodCompilerSchedulerStage.cs"/>
                    <include name="CompilerFramework/Operands/SymbolOperand.cs"/>
                    <include name="CompilerFramework/PlatformStubStage.cs"/>
                    <include name="CompilerFramework/IIntrinsicMethod.cs"/>
                    <include name="CompilerFramework/IBlockOrderStage.cs"/>
                    <include name="CompilerFramework/IPipelineStage.cs"/>
                    <include name="CompilerFramework/IR/CILTransformationStage.cs"/>
                    <include name="CompilerFramework/CIL/ConstrainedPrefixInstruction.cs"/>
                    <include name="CompilerFramework/CIL/ConversionInstruction.cs"/>
                    <include name="CompilerFramework/CIL/Instruction.cs"/>
                    <include name="CompilerFramework/CIL/MethodFlags.cs"/>
                    <include name="CompilerFramework/CIL/MethodHeader.cs"/>
                    <include name="CompilerFramework/CIL/StoreInstruction.cs"/>
                    <include name="CompilerFramework/CIL/ICILVisitor.cs"/>
                    <include name="CompilerFramework/CIL/Prefix.cs"/>
                    <include name="CompilerFramework/CIL/CpblkInstruction.cs"/>
                    <include name="CompilerFramework/CIL/CpobjInstruction.cs"/>
                    <include name="CompilerFramework/CIL/DivInstruction.cs"/>
                    <include name="CompilerFramework/CIL/DupInstruction.cs"/>
                    <include name="CompilerFramework/CIL/EhClause.cs"/>
                    <include name="CompilerFramework/CIL/EndfilterInstruction.cs"/>
                    <include name="CompilerFramework/CIL/EndfinallyInstruction.cs"/>
                    <include name="CompilerFramework/CIL/IBranchInstruction.cs"/>
                    <include name="CompilerFramework/CIL/InitblkInstruction.cs"/>
                    <include name="CompilerFramework/CIL/InitObjInstruction.cs"/>
                    <include name="CompilerFramework/CIL/InvokeInstruction.cs"/>
                    <include name="CompilerFramework/CIL/IsInstInstruction.cs"/>
                    <include name="CompilerFramework/CIL/JumpInstruction.cs"/>
                    <include name="CompilerFramework/CIL/LdargaInstruction.cs"/>
                    <include name="CompilerFramework/CIL/LdargInstruction.cs"/>
                    <include name="CompilerFramework/CIL/LdcInstruction.cs"/>
                    <include name="CompilerFramework/CIL/LdelemaInstruction.cs"/>
                    <include name="CompilerFramework/CIL/LdelemInstruction.cs"/>
                    <include name="CompilerFramework/CIL/LdfldaInstruction.cs"/>
                    <include name="CompilerFramework/CIL/LdfldInstruction.cs"/>
                    <include name="CompilerFramework/CIL/LdftnInstruction.cs"/>
                    <include name="CompilerFramework/CIL/LdlenInstruction.cs"/>
                    <include name="CompilerFramework/CIL/LdlocaInstruction.cs"/>
                    <include name="CompilerFramework/CIL/LdlocInstruction.cs"/>
                    <include name="CompilerFramework/CIL/LdobjInstruction.cs"/>
                    <include name="CompilerFramework/CIL/LdsfldaInstruction.cs"/>
                    <include name="CompilerFramework/CIL/LdsfldInstruction.cs"/>
                    <include name="CompilerFramework/CIL/LdstrInstruction.cs"/>
                    <include name="CompilerFramework/CIL/LdtokenInstruction.cs"/>
                    <include name="CompilerFramework/CIL/LdvirtftnInstruction.cs"/>
                    <include name="CompilerFramework/CIL/LeaveInstruction.cs"/>
                    <include name="CompilerFramework/CIL/LoadInstruction.cs"/>
                    <include name="CompilerFramework/CIL/LocalallocInstruction.cs"/>
                    <include name="CompilerFramework/CIL/MkrefanyInstruction.cs"/>
                    <include name="CompilerFramework/CIL/MulInstruction.cs"/>
                    <include name="CompilerFramework/CIL/NaryInstruction.cs"/>
                    <include name="CompilerFramework/CIL/NegInstruction.cs"/>
                    <include name="CompilerFramework/CIL/NewarrInstruction.cs"/>
                    <include name="CompilerFramework/CIL/NewobjInstruction.cs"/>
                    <include name="CompilerFramework/CIL/NoPrefixInstruction.cs"/>
                    <include name="CompilerFramework/CIL/NotInstruction.cs"/>
                    <include name="CompilerFramework/CIL/OpCode.cs"/>
                    <include name="CompilerFramework/CIL/PopInstruction.cs"/>
                    <include name="CompilerFramework/CIL/PrefixInstruction.cs"/>
                    <include name="CompilerFramework/CIL/RefanytypeInstruction.cs"/>
                    <include name="CompilerFramework/CIL/RefanyvalInstruction.cs"/>
                    <include name="CompilerFramework/CIL/RemInstruction.cs"/>
                    <include name="CompilerFramework/CIL/RethrowInstruction.cs"/>
                    <include name="CompilerFramework/CIL/ReturnInstruction.cs"/>
                    <include name="CompilerFramework/CIL/ShiftInstruction.cs"/>
                    <include name="CompilerFramework/CIL/SizeofInstruction.cs"/>
                    <include name="CompilerFramework/CIL/StargInstruction.cs"/>
                    <include name="CompilerFramework/CIL/StelemInstruction.cs"/>
                    <include name="CompilerFramework/CIL/StfldInstruction.cs"/>
                    <include name="CompilerFramework/CIL/StlocInstruction.cs"/>
                    <include name="CompilerFramework/CIL/StobjInstruction.cs"/>
                    <include name="CompilerFramework/CIL/StsfldInstruction.cs"/>
                    <include name="CompilerFramework/CIL/SubInstruction.cs"/>
                    <include name="CompilerFramework/CIL/SwitchInstruction.cs"/>
                    <include name="CompilerFramework/CIL/ThrowInstruction.cs"/>
                    <include name="CompilerFramework/CIL/UnalignedPrefixInstruction.cs"/>
                    <include name="CompilerFramework/CIL/UnaryArithmeticInstruction.cs"/>
                    <include name="CompilerFramework/CIL/UnaryBranchInstruction.cs"/>
                    <include name="CompilerFramework/CIL/UnaryInstruction.cs"/>
                    <include name="CompilerFramework/CIL/UnboxAnyInstruction.cs"/>
                    <include name="CompilerFramework/CIL/UnboxInstruction.cs"/>
                    <include name="CompilerFramework/Branch.cs"/>
                    <include name="CompilerFramework/Context.cs"/>
                    <include name="CompilerFramework/BaseMethodCompilerStage.cs"/>
                    <include name="CompilerFramework/ICodeEmitter.cs"/>
                    <include name="CompilerFramework/IR/AddressOfInstruction.cs"/>
                    <include name="CompilerFramework/IR/ArithmeticShiftRightInstruction.cs"/>
                    <include name="CompilerFramework/IR/BranchInstruction.cs"/>
                    <include name="CompilerFramework/IR/CallInstruction.cs"/>
                    <include name="CompilerFramework/IR/ConditionCode.cs"/>
                    <include name="CompilerFramework/IR/NopInstruction.cs"/>
                    <include name="CompilerFramework/IR/IConditionalInstruction.cs"/>
                    <include name="CompilerFramework/IR/LiteralData.cs"/>
                    <include name="CompilerFramework/IR/Instruction.cs"/>
                    <include name="CompilerFramework/IR/EpilogueInstruction.cs"/>
                    <include name="CompilerFramework/IR/FloatingPointCompareInstruction.cs"/>
                    <include name="CompilerFramework/IR/FloatingPointToIntegerConversionInstruction.cs"/>
                    <include name="CompilerFramework/IR/IIRInstruction.cs"/>
                    <include name="CompilerFramework/IR/IIRVisitor.cs"/>
                    <include name="CompilerFramework/IR/IntegerCompareInstruction.cs"/>
                    <include name="CompilerFramework/IR/IntegerToFloatingPointConversionInstruction.cs"/>
                    <include name="CompilerFramework/IR/BaseInstruction.cs"/>
                    <include name="CompilerFramework/IR/JmpInstruction.cs"/>
                    <include name="CompilerFramework/IR/LiteralInstruction.cs"/>
                    <include name="CompilerFramework/IR/LoadInstruction.cs"/>
                    <include name="CompilerFramework/IR/LogicalAndInstruction.cs"/>
                    <include name="CompilerFramework/IR/LogicalNotInstruction.cs"/>
                    <include name="CompilerFramework/IR/LogicalOrInstruction.cs"/>
                    <include name="CompilerFramework/IR/LogicalXorInstruction.cs"/>
                    <include name="CompilerFramework/IR/MoveInstruction.cs"/>
                    <include name="CompilerFramework/IR/OneOperandInstruction.cs"/>
                    <include name="CompilerFramework/IR/PhiData.cs"/>
                    <include name="CompilerFramework/IR/PhiInstruction.cs"/>
                    <include name="CompilerFramework/IR/PopInstruction.cs"/>
                    <include name="CompilerFramework/IR/PrologueInstruction.cs"/>
                    <include name="CompilerFramework/IR/PushInstruction.cs"/>
                    <include name="CompilerFramework/IR/ReturnInstruction.cs"/>
                    <include name="CompilerFramework/IR/ShiftLeftInstruction.cs"/>
                    <include name="CompilerFramework/IR/ShiftRightInstruction.cs"/>
                    <include name="CompilerFramework/IR/SignExtendedMoveInstruction.cs"/>
                    <include name="CompilerFramework/IR/StoreInstruction.cs"/>
                    <include name="CompilerFramework/IR/ThreeOperandInstruction.cs"/>
                    <include name="CompilerFramework/IR/TwoOperandInstruction.cs"/>
                    <include name="CompilerFramework/IR/ZeroExtendedMoveInstruction.cs"/>
                    <include name="CompilerFramework/IR/ConstantFoldingStage.cs"/>
                    <include name="CompilerFramework/IVisitor.cs"/>
                    <include name="CompilerFramework/IBranch.cs"/>
                    <include name="CompilerFramework/IIRnstruction.cs"/>
                    <include name="CompilerFramework/IPlatformInstruction.cs"/>
                    <include name="CompilerFramework/CIL/ICILInstruction.cs"/>
                    <include name="CompilerFramework/IInstruction.cs"/>
                    <include name="CompilerFramework/FlowGraphVisualizationStage.cs"/>
                    <include name="CompilerFramework/CIL/NopInstruction.cs"/>
                    <include name="CompilerFramework/InstructionSet.cs"/>
                    <include name="CompilerFramework/InstructionData.cs"/>
                    <include name="CompilerFramework/CIL/BaseInstruction.cs"/>
                    <include name="CompilerFramework/Operands/StringOperand.cs"/>
                    <include name="CompilerFramework/ReverseBlockOrderStage.cs"/>
                    <include name="CompilerFramework/OperandDeterminationStage.cs"/>
                    <include name="CompilerFramework/RuntimeMethodData.cs"/>
                    <include name="CompilerFramework/StackRegisterAllocator.cs"/>
                    <include name="CompilerFramework/StrengthReductionStage.cs"/>
                    <include name="CompilerFramework/SimpleTraceBlockOrderStage.cs"/>
                    <include name="CompilerFramework/LoopAwareBlockOrderStage.cs"/>
                    <include name="CompilerFramework/LocalCSE.cs"/>
                    <include name="CompilerFramework/IMethodCompiler.cs"/>
                    <include name="Linker/BaseAssemblyLinkerStage.cs"/>
                    <include name="Memory/IMemoryPageManager.cs"/>
                    <include name="Memory/PageAccessFlags.cs"/>
                    <include name="IJitService.cs"/>
                    <include name="MethodCompilationStageComposite.cs"/>
                    <include name="CompilerFramework/ArchitectureSpecificAttribute.cs"/>
                    <include name="CompilerFramework/AssemblyCompiler.cs"/>
                    <include name="CompilerFramework/BasicArchitecture.cs"/>
                    <include name="CompilerFramework/BasicBlock.cs"/>
                    <include name="CompilerFramework/BlockReductionStage.cs"/>
                    <include name="CompilerFramework/BlockOrderFlags.cs"/>
                    <include name="CompilerFramework/CodeGenerationStage.cs"/>
                    <include name="CompilerFramework/BaseCodeTransformationStage.cs"/>
                    <include name="CompilerFramework/CompilationException.cs"/>
                    <include name="CompilerFramework/CompilerPipeline.cs"/>
                    <include name="CompilerFramework/CIL/ConstantFoldingStage.cs"/>
                    <include name="CompilerFramework/Operands/ConstantOperand.cs"/>
                    <include name="CompilerFramework/ConstantPropagationStage.cs"/>
                    <include name="CompilerFramework/DominanceCalculationStage.cs"/>
                    <include name="CompilerFramework/EnterSSA.cs"/>
                    <include name="CompilerFramework/FlowControl.cs"/>
                    <include name="CompilerFramework/FunctionCallInliningProcessor.cs"/>
                    <include name="CompilerFramework/IArchitecture.cs"/>
                    <include name="CompilerFramework/IAssemblyCompilerStage.cs"/>
                    <include name="CompilerFramework/ICallingConvention.cs"/>
                    <include name="CompilerFramework/ICodeGenerationStage.cs"/>
                    <include name="CompilerFramework/IDominanceProvider.cs"/>
                    <include name="CompilerFramework/CIL/IInstructionDecoder.cs"/>
                    <include name="CompilerFramework/IMethodCompilerBuilder.cs"/>
                    <include name="CompilerFramework/IMethodCompilerStage.cs"/>
                    <include name="CompilerFramework/InstructionLogger.cs"/>
                    <include name="CompilerFramework/IPlatformStage.cs"/>
                    <include name="CompilerFramework/IRegisterConstraint.cs"/>
                    <include name="CompilerFramework/IStackLayoutProvider.cs"/>
                    <include name="CompilerFramework/JitTrampolineAttribute.cs"/>
                    <include name="CompilerFramework/Operands/LabelOperand.cs"/>
                    <include name="CompilerFramework/LeaveSSA.cs"/>
                    <include name="CompilerFramework/LinearRegisterAllocator.cs"/>
                    <include name="CompilerFramework/Operands/MemberOperand.cs"/>
                    <include name="CompilerFramework/Operands/MemoryOperand.cs"/>
                    <include name="CompilerFramework/BaseMethodCompiler.cs"/>
                    <include name="CompilerFramework/NakedAttribute.cs"/>
                    <include name="CompilerFramework/Operands/ObjectFieldOperand.cs"/>
                    <include name="CompilerFramework/ObjectFileBuilderBase.cs"/>
                    <include name="CompilerFramework/Operands/Operand.cs"/>
                    <include name="CompilerFramework/Operands/ParameterOperand.cs"/>
                    <include name="CompilerFramework/Register.cs"/>
                    <include name="CompilerFramework/Operands/RegisterOperand.cs"/>
                    <include name="CompilerFramework/RuntimeSupportAttribute.cs"/>
                    <include name="CompilerFramework/SimpleRegisterAllocator.cs"/>
                    <include name="CompilerFramework/StackLayoutStage.cs"/>
                    <include name="CompilerFramework/Operands/StackOperand.cs"/>
                    <include name="CompilerFramework/StackTypeCode.cs"/>
                    <include name="CompilerFramework/Operands/StaticFieldOperand.cs"/>
                    <include name="CompilerFramework/Operands/TemporaryOperand.cs"/>
                    <include name="CompilerFramework/Operands/LocalVariableOperand.cs"/>
                    <include name="CompilerFramework/IR/VmCall.cs"/>
		</sources>
		<references>
                    <include name="System.dll"/>
                    <include name="../../3rdParty/Mono.Cecil.dll"/>
                    <include name="${outputDirectory}/Mosa.Compiler.Common.dll"/>
                    <include name="${outputDirectory}/Mosa.Compiler.FileFormat.dll"/>
                    <include name="${outputDirectory}/Mosa.Compiler.Linker.dll"/>
                    <include name="${outputDirectory}/Mosa.Runtime.Metadata.dll"/>
                    <include name="${outputDirectory}/Mosa.Runtime.TypeSystem.dll"/>
		</references>
		<!-- supress warnings -->
		<nowarn><warning number="${suppresswarnings}"/></nowarn>
        </csc>
	</target>
</project>
